{
    "$schema": "https://json-schema.org/draft/2019-09/schema",
    "type": "object",
    "description": "A file of read sequences generated by a sequencing experiment.",
    "unevaluatedProperties": false,
    "title": "Sequence file",
    "name": "sequence_file",
    "required": [
        "content"
    ],
    "allOf": [
        {
            "type": "object",
            "$comment": "This loads the system needed properties outside the 'content' field. For implementation outside of MorPhiC, please ensure the system properties satisfy your implementation. These properties are not meant for the user to see.",
            "properties": {
                "accessions": {
                    "description": "An International Nucleotide Sequence Database Collaboration (INSDC) run accession.",
                    "title": "Run accession",
                    "items": {
                        "anyOf": [
                            {
                                "isValidIdentifier": {
                                    "prefix": "insdc.sra"
                                }
                            },
                            {
                                "isValidIdentifier": {
                                    "prefix": "ena.embl"
                                }
                            },
                            {
                                "isValidIdentifier": {
                                    "prefix": "geo"
                                }
                            }
                        ],
                        "$ref": "#/definitions/non_empty_string"
                    },
                    "examples": [
                        "ERR000001",
                        "SRR111110"
                    ],
                    "$ref": "#/definitions/non_empty_array",
                    "$comment": "the value for 'prefixes' or 'prefix' must be added by the schemas that load this system module."
                },
                "described_by": {
                    "pattern": "^.*/type/[0-9]+.[0-9]+.[0-9]+/file/sequence_file$",
                    "$ref": "#/definitions/non_empty_string",
                    "format": "uri",
                    "description": "The URL reference to the schema."
                },
                "schema_type": {
                    "const": "sequence_file",
                    "default": "sequence_file",
                    "$ref": "#/definitions/non_empty_string",
                    "description": "The type of the metadata schema entity.",
                    "$comment": "Please add enum to this property definition when you load this module as a reference."
                },
                "schema_version": {
                    "$ref": "#/definitions/non_empty_string",
                    "pattern": "^[0-9]+.[0-9]+.[0-9]+$",
                    "description": "The version number of the schema in major.minor.patch format.",
                    "examples": [
                        "1.0.1",
                        "4.6.1"
                    ]
                },
                "submitted_at": {
                    "$ref": "#/definitions/non_empty_string",
                    "format": "date-time",
                    "description": "Date the document was submitted, in ISO8601 format.",
                    "examples": [
                        "2018-11-13T20:20:39+00:00",
                        "2019-11-13T20:20:39+00:00"
                    ]
                },
                "submitted_by": {
                    "$ref": "#/definitions/non_empty_string",
                    "description": "User that submitted this document."
                },
                "updated_at": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Date the document was updated, in ISO8601 format.",
                    "examples": [
                        "2018-11-13T20:20:39+00:00",
                        "2019-11-13T20:20:39+00:00"
                    ]
                },
                "updated_by": {
                    "$ref": "#/definitions/non_empty_string",
                    "description": "User that updated this document."
                },
                "uuid": {
                    "$ref": "#/definitions/non_empty_string",
                    "format": "uuid",
                    "description": "Universal Unique Identifier (UUID) for this document in the database.",
                    "examples": [
                        "1008b1ea-b3b7-4b0d-bfb9-a04c344bffdc",
                        "1c32efbf-2f57-4ce5-bc2c-7b0b509a9e58"
                    ]
                }
            },
            "description": "A definition of the system-filled properties loaded by stand-alone documents.",
            "title": "system",
            "required": [
                "described_by",
                "schema_type",
                "schema_version",
                "submitted_at",
                "submitted_by",
                "uuid"
            ]
        }
    ],
    "properties": {
        "content": {
            "type": "object",
            "title": "Content",
            "required": [
                "extension",
                "label",
                "read_index"
            ],
            "properties": {
                "checksum": {
                    "$ref": "#/definitions/non_empty_string",
                    "description": "MD5 checksum of the file.",
                    "title": "Checksum",
                    "examples": [
                        "e09a986c2e630130b1849d4bf9a94c06"
                    ]
                },
                "extension": {
                    "$ref": "#/definitions/non_empty_string",
                    "description": "The extension of the file. Please indicate the full file extension including compression extensions.",
                    "title": "File extension",
                    "examples": [
                        "fastq.gz",
                        "tif"
                    ]
                },
                "label": {
                    "$ref": "#/definitions/entity_id",
                    "description": "The name of the file. Please include the file extension in the file name.",
                    "title": "File name",
                    "examples": [
                        "R1.fastq.gz",
                        "R2.fastq.gz"
                    ]
                },
                "lane_index": {
                    "type": "integer",
                    "description": "The lane that this file was sequenced from.",
                    "title": "Lane index",
                    "examples": [
                        1,
                        4
                    ]
                },
                "read_index": {
                    "$ref": "#/definitions/non_empty_string",
                    "description": "The sequencing read this file represents. If a sequencing experiment is single-end, enter 'read1'.",
                    "title": "Read index",
                    "enum": [
                        "read1",
                        "read2",
                        "read3",
                        "read4",
                        "index1",
                        "index2",
                        "single-end, non-indexed"
                    ],
                    "examples": [
                        "index2",
                        "read1"
                    ]
                },
                "read_length": {
                    "type": "integer",
                    "description": "The length of a sequenced read in this file, in nucleotides.",
                    "title": "Read length",
                    "examples": [
                        51,
                        150
                    ]
                }
            }
        }
    },
    "definitions": {
        "non_empty_string": {
            "type": "string",
            "minLength": 1
        },
        "non_empty_array": {
            "type": "array",
            "minItems": 1
        },
        "entity_id": {
            "type": "string",
            "format": "regex",
            "pattern": "^[a-zA-Z0-9_]*$",
            "minLength": 1
        }
    }
}